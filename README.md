## assimilate-nestjs-crud-operations [postgres]

1. set up the project using nest/cli `nest new project-name`
2. install necessary modules to work with prefered database i.e. `npm install --save @nestjs/typeorm typeorm pg`
3. configure the database variables i.e. create a `.env` file

``` 
PG_HOST=localhost
PG_PORT=5432
PG_USERNAME=postgres
PG_PASSWORD=root
PG_DATABASE=demo
PORT=3000
MODE=DEV
RUN_MIGRATIONS=true
```
4. now in the default generated `app.module.ts` file configure typeorm using `process.env` or `ConfigModule` from `npm i --save @nestjs/config`
5. generate resource i.e. for user `nest g res user` 
6. create entities i.e. for user define data model in `user.entity.ts` file 
```
import { Entity, PrimaryGeneratedColumn, Column } from 'typeorm';

@Entity()
export class User {
  @PrimaryGeneratedColumn()
  id: number;

  @Column()
  fullName: string;

  @Column({ unique: true })
  email: string;
}
```
7. add validation i.e. nest provides builtin validation pipe install using `npm i --save class-validator class-transformer` 
```
app.useGlobalPipes(
    new ValidationPipe({ whitelist: true }),
);
```
8. now define the data schema for entities in dto objects i.e. for `create-user.dto.ts` 
```
import {
  IsEmail,
  IsNotEmpty,
  IsString,
} from 'class-validator';

// create-user-dto
export class CreateUserDto {
  @IsNotEmpty()
  @IsString()
  fullName: string;

  @IsNotEmpty()
  @IsEmail()
  email: string;
}
```
9. for updating `res` `update-<res>.dto.ts` file which is a partial type of `create-<res>.dto.ts` should be auto generated by `nest/cli` resource generation i.e. for `User` entity `update-user.dto.ts` is partial type of `create-user.dto.ts`
```
export class UpdateUserDto extends PartialType(CreateUserDto) {}
```
10. create service for interacting with the database i.e. create methods for creating, reading, updating, and deleting users from the database, use `Repositoy` for abstracting complex data operations
11. create controller for routes and api endpoints for http methods `GET`, `POST` etc.
12. wire everything together i.e. inside `user.module.ts` file import `TypeOrmModule.forFeature([User])` for user entity

13. now run the application using `npm run start:dev` command 